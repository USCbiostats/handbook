<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>3 Building a R package | USC biostats R Handbook</title>
  <meta name="description" content="Working document description best practices and coding standard used in the USC Biostats department.">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="3 Building a R package | USC biostats R Handbook" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Working document description best practices and coding standard used in the USC Biostats department." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 Building a R package | USC biostats R Handbook" />
  
  <meta name="twitter:description" content="Working document description best practices and coding standard used in the USC Biostats department." />
  

<meta name="author" content="Emil Hvitfeldt">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="coding-standards.html">
<link rel="next" href="parallel-computing.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Handbook</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Welcome</a></li>
<li class="chapter" data-level="2" data-path="coding-standards.html"><a href="coding-standards.html"><i class="fa fa-check"></i><b>2</b> Coding Standards</a><ul>
<li class="chapter" data-level="2.1" data-path="coding-standards.html"><a href="coding-standards.html#general-overview"><i class="fa fa-check"></i><b>2.1</b> General overview</a></li>
<li class="chapter" data-level="2.2" data-path="coding-standards.html"><a href="coding-standards.html#helpful-suggestions"><i class="fa fa-check"></i><b>2.2</b> Helpful suggestions</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="building-a-r-package.html"><a href="building-a-r-package.html"><i class="fa fa-check"></i><b>3</b> Building a R package</a><ul>
<li class="chapter" data-level="3.1" data-path="building-a-r-package.html"><a href="building-a-r-package.html#motivation"><i class="fa fa-check"></i><b>3.1</b> Motivation</a></li>
<li class="chapter" data-level="3.2" data-path="building-a-r-package.html"><a href="building-a-r-package.html#preperation"><i class="fa fa-check"></i><b>3.2</b> Preperation</a><ul>
<li class="chapter" data-level="3.2.1" data-path="building-a-r-package.html"><a href="building-a-r-package.html#naming-your-r-package"><i class="fa fa-check"></i><b>3.2.1</b> Naming your R package</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="building-a-r-package.html"><a href="building-a-r-package.html#minimal-r-package"><i class="fa fa-check"></i><b>3.3</b> Minimal R Package</a></li>
<li class="chapter" data-level="3.4" data-path="building-a-r-package.html"><a href="building-a-r-package.html#additional-components"><i class="fa fa-check"></i><b>3.4</b> Additional Components</a><ul>
<li class="chapter" data-level="3.4.1" data-path="building-a-r-package.html"><a href="building-a-r-package.html#r-code-r"><i class="fa fa-check"></i><b>3.4.1</b> R code <code>R/</code></a></li>
<li class="chapter" data-level="3.4.2" data-path="building-a-r-package.html"><a href="building-a-r-package.html#readme"><i class="fa fa-check"></i><b>3.4.2</b> README</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="building-a-r-package.html"><a href="building-a-r-package.html#resources"><i class="fa fa-check"></i><b>3.5</b> Resources</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="parallel-computing.html"><a href="parallel-computing.html"><i class="fa fa-check"></i><b>4</b> Parallel computing</a></li>
<li class="chapter" data-level="5" data-path="testing.html"><a href="testing.html"><i class="fa fa-check"></i><b>5</b> Testing</a></li>
<li class="chapter" data-level="6" data-path="profile-benchmark.html"><a href="profile-benchmark.html"><i class="fa fa-check"></i><b>6</b> Profiling and benchmarking</a><ul>
<li class="chapter" data-level="6.1" data-path="profile-benchmark.html"><a href="profile-benchmark.html#introduction"><i class="fa fa-check"></i><b>6.1</b> Introduction</a></li>
<li class="chapter" data-level="6.2" data-path="profile-benchmark.html"><a href="profile-benchmark.html#profiling"><i class="fa fa-check"></i><b>6.2</b> Profiling</a><ul>
<li class="chapter" data-level="6.2.1" data-path="profile-benchmark.html"><a href="profile-benchmark.html#troubleshooting"><i class="fa fa-check"></i><b>6.2.1</b> Troubleshooting</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="profile-benchmark.html"><a href="profile-benchmark.html#benchmarking"><i class="fa fa-check"></i><b>6.3</b> Benchmarking</a><ul>
<li class="chapter" data-level="6.3.1" data-path="profile-benchmark.html"><a href="profile-benchmark.html#slow-code"><i class="fa fa-check"></i><b>6.3.1</b> Slow code</a></li>
<li class="chapter" data-level="6.3.2" data-path="profile-benchmark.html"><a href="profile-benchmark.html#fast-code---microbenchmarking"><i class="fa fa-check"></i><b>6.3.2</b> Fast code - microbenchmarking</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="profile-benchmark.html"><a href="profile-benchmark.html#additional-resources"><i class="fa fa-check"></i><b>6.4</b> Additional resources</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">USC biostats R Handbook</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="building-a-r-package" class="section level1">
<h1><span class="header-section-number">3</span> Building a R package</h1>
<div id="motivation" class="section level2">
<h2><span class="header-section-number">3.1</span> Motivation</h2>
<p>This chapter will show you how to create a R package with varrying number of additions. From a simple minimal package for personal use to a fully-fleshed package.</p>
<p>Creating a R package is not only done for publication. It also helps you stay organizes, save yourself time while still letting you share your code with other people. Learning what goes into creating a package can be a mouthful at first but the conventions and rules revolving around packages makes the creation easy.</p>
</div>
<div id="preperation" class="section level2">
<h2><span class="header-section-number">3.2</span> Preperation</h2>
<p>To get started it would be preferriable for you to have git installed on your machine and have a Github account. <a href="https://happygitwithr.com/" class="uri">https://happygitwithr.com/</a> provides a brilliant and thorough walkthrough of using git/Github with R.</p>
<p>In addition to git, you will also need the following packages</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="kw">c</span>(<span class="st">&quot;devtools&quot;</span>, <span class="st">&quot;roxygen2&quot;</span>, <span class="st">&quot;testthat&quot;</span>, <span class="st">&quot;knitr&quot;</span>))</code></pre>
<p>If you are planning on using compiled code you will need to install the following depending on your operating system:</p>
<p>On Windows, download and install <a href="https://cran.r-project.org/bin/windows/Rtools/">Rtools</a>.
On Mac, download and install XCode (available for free in the App Store) or the <a href="http://developer.apple.com/downloads">Command Line Tools for Xcode</a>.<br />
On Linux, download and install the R development tools.</p>
<div id="naming-your-r-package" class="section level3">
<h3><span class="header-section-number">3.2.1</span> Naming your R package</h3>
<p>When creating a package you need to give it at name. The name</p>
<ul>
<li>can only consist of letters, numbers and periods</li>
<li>must start with a letter, and</li>
<li>cannot end with a period</li>
</ul>
<p>Furthermore we recommend that you don’t use periods and stick with letters as much as possible. You need a unique name, mainly because of the fact that if you plan on getting your package on CRAN or bioconductor you can’t overlap with any of their names. A easy check for can be done using the <a href="https://github.com/ropenscilabs/available">available package</a>. <strong>available</strong> also checks across acronyms, slang and other meanings that you might have missed. Secondly try to pick a name that is googleable.</p>
</div>
</div>
<div id="minimal-r-package" class="section level2">
<h2><span class="header-section-number">3.3</span> Minimal R Package</h2>
<p>Creating a package can easily be done using the <strong>usethis</strong> package, all you need is to provide a path to the directory you want the pacakge to be created in.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">create_package</span>(<span class="st">&quot;~/path/to/packagename&quot;</span>)</code></pre>
<p>If you are using Rstudio you should already be transported to a project at the specified location with the following content</p>
<p><img src="screenshots/r-packages/minimal-package.png" /></p>
<p>For now we will focus on the <code>/R</code> folder and the <code>DESCRIPTION</code> files as the remaining files/folders should be automatically modified if we use <strong>usethis</strong>.</p>
<p>The <code>DESCRIPTION</code> is our first stop. You should make yourself the author,</p>
<pre><code>Authors@R: 
    person(&quot;given name&quot;, &quot;family name&quot;, role = c(&quot;aut&quot;, &quot;cre&quot;), &quot;contact@mail.com&quot;)</code></pre>
<p>The roles <code>aut</code> and <code>cre</code> stand for author and creator respectively. More details regarding use of roles can be found <a href="https://r-pkgs.org/description.html#author">here</a>. Next you need to fill in the <code>Title</code> and <code>Description</code> fields. The <code>Title</code> should be a short and simple description of the package. Must be plain text, title-case (This Sentence Is Title Case), not end in a period and should preferable be les then 65 characters. The <code>Description</code> fields is the more detailed version of the <code>Title</code> field. It should span multiple lines, each indented 4 spaces (first excluded) and being less then 80 characters long. This is a fairly limited space so further details should be included in the readme.</p>
<p>The package created here doesn’t provide anything in terms of functions or data. Adding these objects will be the subject of the next section.</p>
</div>
<div id="additional-components" class="section level2">
<h2><span class="header-section-number">3.4</span> Additional Components</h2>
<p>This section will introduce various components you can include in your package to improve its functionality and useability.</p>
<div id="r-code-r" class="section level3">
<h3><span class="header-section-number">3.4.1</span> R code <code>R/</code></h3>
</div>
<div id="readme" class="section level3">
<h3><span class="header-section-number">3.4.2</span> README</h3>
</div>
</div>
<div id="resources" class="section level2">
<h2><span class="header-section-number">3.5</span> Resources</h2>
<p>Usethis package
<a href="https://github.com/r-lib/usethis" class="uri">https://github.com/r-lib/usethis</a></p>
<p>Writing a R package slides
<a href="https://github.com/jalapic/RPackage/blob/master/Writing%20an%20R%20Package.pdf" class="uri">https://github.com/jalapic/RPackage/blob/master/Writing%20an%20R%20Package.pdf</a></p>
<p>Cran documentation
<a href="https://cran.r-project.org/doc/manuals/R-exts.html" class="uri">https://cran.r-project.org/doc/manuals/R-exts.html</a></p>
<p>Pick a license
<a href="https://blog.codinghorror.com/pick-a-license-any-license/" class="uri">https://blog.codinghorror.com/pick-a-license-any-license/</a>
<a href="https://choosealicense.com/licenses/" class="uri">https://choosealicense.com/licenses/</a>
<a href="https://tldrlegal.com/" class="uri">https://tldrlegal.com/</a>
<a href="https://cran.r-project.org/doc/manuals/R-exts.html#The-DESCRIPTION-file" class="uri">https://cran.r-project.org/doc/manuals/R-exts.html#The-DESCRIPTION-file</a></p>
<p>Build a Basic Package
<a href="http://rpubs.com/jennybc/build-a-basic-package" class="uri">http://rpubs.com/jennybc/build-a-basic-package</a></p>
<p>Deployment options
<a href="https://twitter.com/WeAreRLadies/status/1110694338068140032" class="uri">https://twitter.com/WeAreRLadies/status/1110694338068140032</a></p>
<p>R Packages
<a href="https://r-pkgs.org/" class="uri">https://r-pkgs.org/</a></p>
<p><a href="https://www.hvitfeldt.me/blog/usethis-workflow-for-package-development/" class="uri">https://www.hvitfeldt.me/blog/usethis-workflow-for-package-development/</a></p>
<p><a href="https://usethis.r-lib.org/" class="uri">https://usethis.r-lib.org/</a></p>
<p>You can make a package in 20 minutes - Rstudio Conf Talk by Jim Hester
<a href="https://www.rstudio.com/resources/videos/you-can-make-a-package-in-20-minutes/" class="uri">https://www.rstudio.com/resources/videos/you-can-make-a-package-in-20-minutes/</a></p>
<p><a href="https://hilaryparker.com/2014/04/29/writing-an-r-package-from-scratch/" class="uri">https://hilaryparker.com/2014/04/29/writing-an-r-package-from-scratch/</a></p>
<p><a href="https://cran.r-project.org/doc/manuals/r-release/R-exts.html" class="uri">https://cran.r-project.org/doc/manuals/r-release/R-exts.html</a></p>
<p><a href="https://ropensci.github.io/dev_guide/" class="uri">https://ropensci.github.io/dev_guide/</a></p>
<p><a href="https://ropensci.org/blog/2018/03/16/thanking-reviewers-in-metadata/" class="uri">https://ropensci.org/blog/2018/03/16/thanking-reviewers-in-metadata/</a></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="coding-standards.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="parallel-computing.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/02-r_package.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": ["Handbook.pdf", "Handbook.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
